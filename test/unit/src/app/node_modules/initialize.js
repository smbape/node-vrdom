var deps = [
    "vrdom.min",
    {amd: "preact", brunch: "!preact"},
    {
        amd: "auto-reload"
    }
];

function factory(vrdom, preact) {
    var React = vrdom,
        ReactDOM = vrdom,
        assign = vrdom.functions.assign,
        inherits = vrdom.functions.inherits,
        eventLoggers = {};

    preact.options.syncComponentUpdates = true;
    preact.options.debounceRendering = function(rerender) {
        rerender();
    };

    var delegateEvents = [
        "blur",
        "change",
        "click",
        "drag",
        "drop",
        "focus",
        "input",
        "load",
        "mouseenter",
        "mouseleave",
        "mousemove",
        "mouseout",
        "mouseover",
        "propertychange",
        "reset",
        "scroll",
        "submit",
        "abort",
        "canplay",
        "canplaythrough",
        "durationchange",
        "emptied",
        "encrypted",
        "ended",
        "error",
        "loadeddata",
        "loadedmetadata",
        "loadstart",
        "pause",
        "play",
        "playing",
        "progress",
        "ratechange",
        "seeked",
        "seeking",
        "stalled",
        "suspend",
        "timeupdate",
        "volumechange",
        "waiting"
    ];

    for (var i = 0, len = delegateEvents.length; i < len; i++) {
        var type = delegateEvents[i];
        eventLoggers[type] = console.log.bind(console, type);
    }

    function trigger(type, elem) {
        var nativeEvent;
        nativeEvent = document.createEvent("Event");
        nativeEvent.initEvent(type, true, true);
        elem.dispatchEvent(nativeEvent);
    }

    (function() {
        return;
        'use strict';
        let container = document.createElement("div");
        document.body.appendChild(container);
        let domNode = vrdom.render(<div>text</div>, container);

        class Component extends vrdom.Component {
            render() {
                return <div>text</div>;
            }
        }
        domNode = vrdom.render(<Component />, container);

        let ComponentClass = vrdom.createClass({
            render() {
                return <div>text</div>;
            }
        });
        domNode = vrdom.render(<ComponentClass />, container);

        function Stateless() {
            return <div>text</div>;
        }
        domNode = vrdom.render(<Stateless />, container);
    }());

    (function() {
        return;
        'use strict';
        let container = document.createElement("div");
        document.body.appendChild(container);
        let domNode = vrdom.render(<input defaultValue="text" onchange={ console.log.bind(console) } />, container);
    }());

    (function() {
        return;
        "use strict";
        var container = document.createElement("div");
        document.body.appendChild(container);

        function SwapComponent() {
            this.swap = this.swap.bind(this);
            this.state = {
                activated: false
            };
        }

        inherits(SwapComponent, vrdom.Component);

        SwapComponent.prototype.swap = function() {
            return this.setState({
                activated: !this.state.activated
            });
        };

        SwapComponent.prototype.render = function() {
            if (!this.state.activated) {
                return <a onClick={ this.swap }>anchor</a>;
            } else {
                return <b onClick={ this.swap }>bold</b>;
            }
        };

        var instance = vrdom.render(<SwapComponent />, container);
        var el = vrdom.findDOMNode(instance);
        setTimeout(function() {
            trigger("click", el);
            el = null;
            setTimeout(function() {
                vrdom.unmountComponentAtNode(container);
                container = null;
            }, 5000);
        }, 5000);
    })();

    (function() {
        return;
        var container = document.createElement("div");
        document.body.appendChild(container);
        vrdom.render(
            <div onMouseEnter={ eventLoggers.mouseenter }
              onMouseLeave={ eventLoggers.mouseleave }
              onClick={ eventLoggers.click }
              onMouseOver={ eventLoggers.mouseover }
              onMouseOut={ eventLoggers.mouseout }>
              <input type="text" />
            </div>
            , container);
    })();

    (function() {
        return;
        var container = document.createElement("div");
        container.className = "container full-container";
        document.body.appendChild(container);

        function onWheel(evt) {
            console.log("wheel", evt);
        }

        var style = {
            color: "rgb(255, 255, 255)",
            background: "rgb(255, 100, 0)",
            backgroundPosition: "10px 10px",
            "background-size": "cover",
            padding: 5,
            lineHeight: 0.5,
            position: "relative",
            top: 100,
            left: "0",
            height: "100%"
        };
        var element = <div style={ style } onWheel={ onWheel }></div>;
        ReactDOM.render(element, container);
    })();

    (function() {
        return;
        var container = document.createElement("div");
        container.className = "container full-container";
        document.body.appendChild(container);

        function onResize(evt) {
            alert("resize");
        }

        var element = <div onResize={ onResize }></div>;
        ReactDOM.render(element, container);
    })();

    require(["benchmark/collection"], function() {
        // debugger;
    });
}